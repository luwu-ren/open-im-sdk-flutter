# 群组接口文档

本文档整理了 OpenIM SDK Flutter 中所有群组相关的接口调用方法。

## 文档说明

每个接口都包含以下信息：

1. **方法签名**：Dart 方法的完整定义
2. **通信方式**：与服务端通信的方式（HTTP API 或 WebSocket 长连接）
3. **底层请求方法**：Flutter MethodChannel 调用的方法名
4. **底层 SDK 方法**：iOS 和 Android 原生 SDK 中对应的方法名
5. **请求参数（Map）**：实际传递给原生层的参数格式（JSON 格式示例）
6. **实际传递参数说明**：每个参数的详细说明，包括类型和是否必需
7. **参数说明**：Dart 方法参数的说明（中文）
8. **返回值**：返回类型说明
9. **使用示例**：代码示例

## 通信方式说明

OpenIM SDK 使用两种方式与服务端通信：

### 1. HTTP API（短连接）
- **用途**：用于所有业务逻辑操作，包括：
  - 群组创建、编辑、查询
  - 成员管理（邀请、移除、设置等）
  - 群组申请处理
  - 搜索功能
  - 权限设置等
- **配置地址**：初始化 SDK 时的 `apiAddr` 参数
- **特点**：请求-响应模式，操作完成后立即返回结果

### 2. WebSocket（长连接）
- **用途**：用于实时消息和事件通知，包括：
  - 群组信息变更通知
  - 成员加入/退出通知
  - 群组申请通知
  - 消息实时推送等
- **配置地址**：初始化 SDK 时的 `wsAddr` 参数
- **特点**：保持长连接，服务器可以主动推送事件给客户端

**注意：**
- 所有业务操作接口（如创建群组、邀请成员等）都通过 **HTTP API** 调用
- 所有事件通知（如群组信息变更、成员加入等）都通过 **WebSocket 长连接** 接收
- 监听器（如 `setGroupListener`）设置后，相关事件会通过 WebSocket 长连接实时推送
- 所有请求都会自动添加 `ManagerName: "groupManager"` 参数
- `operationID` 参数如果不提供，SDK 会自动生成一个唯一ID
- 参数中的 `?` 表示该参数可选，如 `String?` 表示可选的字符串
- Array 类型在 JSON 中表示为数组，如 `["string"]` 表示字符串数组

## 目录

- [监听器设置](#监听器设置)
- [群组管理](#群组管理)
- [成员管理](#成员管理)
- [群组申请](#群组申请)
- [搜索功能](#搜索功能)
- [静音管理](#静音管理)
- [权限管理](#权限管理)
- [专用字段管理接口](#专用字段管理接口)
  - [设置群组地理位置](#setgrouplocation)
  - [设置群组标签](#setgrouptags)
  - [设置群组是否公开](#setgrouppublic)
  - [设置群组成员数量限制](#setgroupmaxmembercount)
  - [设置群组行政区域](#setgroupadministrativeregion)
  - [设置群组设置](#setgroupsettings)
- [数据模型](#数据模型)
- [枚举类型](#枚举类型)
- [相关文档](#相关文档)

---

## 监听器设置

### setGroupListener

设置群组关系监听器，用于接收群组相关的事件回调。

```dart
Future setGroupListener(OnGroupListener listener)
```

**通信方式：** 
- 监听器设置：本地操作，不涉及服务端通信
- 监听器回调：通过 **WebSocket 长连接** 接收服务端推送的实时事件

**底层请求方法：** `setGroupListener`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string (自动生成或手动指定)"
}
```

**实际传递参数说明：**
- 该方法不传递额外参数，只传递 ManagerName 和 operationID

**参数：**
- `listener`: 群组监听器实例

**监听器回调事件：**
- `onGroupApplicationAccepted`: 群申请被接受
- `onGroupApplicationAdded`: 新增群申请
- `onGroupApplicationDeleted`: 群申请被删除
- `onGroupApplicationRejected`: 群申请被拒绝
- `onGroupDismissed`: 群被解散
- `onGroupInfoChanged`: 群信息变更
- `onGroupMemberAdded`: 群成员被添加
- `onGroupMemberDeleted`: 群成员被删除
- `onGroupMemberInfoChanged`: 群成员信息变更
- `onJoinedGroupAdded`: 加入的群被添加
- `onJoinedGroupDeleted`: 加入的群被删除

**示例：**
```dart
OpenIM.iMManager.groupManager.setGroupListener(
  OnGroupListener(
    onGroupInfoChanged: (GroupInfo info) {
      print('群信息变更: ${info.groupName}');
    },
    onGroupMemberAdded: (GroupMembersInfo info) {
      print('新成员加入: ${info.nickname}');
    },
  ),
);
```

---

## 群组管理

### createGroup

创建新群组。

```dart
Future<GroupInfo> createGroup({
  required GroupInfo groupInfo,
  List<String> memberUserIDs = const [],
  List<String> adminUserIDs = const [],
  String? ownerUserID,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求发送到服务端的群组管理接口
- 请求地址：`{apiAddr}/group/create_group`（实际由 SDK Core 内部处理）

**底层请求方法：** `createGroup`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkCreateGroup`
- Android: `Open_im_sdk.createGroup`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupInfo": {
    "groupID": "string",
    "groupName": "string?",
    "notification": "string?",
    "introduction": "string?",
    "faceURL": "string?",
    "ownerUserID": "string?",
    "createTime": "int?",
    "memberCount": "int?",
    "status": "int?",
    "creatorUserID": "string?",
    "groupType": "int?",
    "ex": "string?",
    "needVerification": "int?",
    "lookMemberInfo": "int?",
    "applyMemberFriend": "int?",
    "notificationUpdateTime": "int?",
    "notificationUserID": "string?"
  },
  "memberUserIDs": ["string"],
  "adminUserIDs": ["string"],
  "ownerUserID": "string?"
}
```

**实际传递参数说明：**
- `groupInfo` (Object, 必需): GroupInfo 对象的 JSON 序列化
- `memberUserIDs` (Array<String>, 可选): 初始成员用户ID列表
- `adminUserIDs` (Array<String>, 可选): 管理员用户ID列表
- `ownerUserID` (String, 可选): 群主用户ID
- `operationID` (String, 可选): 操作ID，未提供时自动生成

**参数：**
- `groupInfo`: 群组信息（必需）
- `memberUserIDs`: 初始成员用户ID列表（默认空列表）
- `adminUserIDs`: 管理员用户ID列表（默认空列表）
- `ownerUserID`: 群主用户ID（可选）
- `operationID`: 操作ID（可选）

**返回值：** `Future<GroupInfo>`

**示例：**
```dart
final groupInfo = GroupInfo(
  groupID: 'group_123',
  groupName: '测试群组',
  introduction: '这是一个测试群组',
  faceURL: 'https://example.com/avatar.png',
  groupType: GroupType.work,
  needVerification: GroupVerification.allNeedVerification,
);

final result = await OpenIM.iMManager.groupManager.createGroup(
  groupInfo: groupInfo,
  memberUserIDs: ['user1', 'user2'],
  adminUserIDs: ['user1'],
);
```

### setGroupInfo

编辑群组信息。

```dart
Future<dynamic> setGroupInfo(
  GroupInfo groupInfo, {
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求发送到服务端的群组信息更新接口
- 请求地址：`{apiAddr}/group/update_group_info`（实际由 SDK Core 内部处理）
- 修改成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupInfoChanged` 事件通知所有群成员

**底层请求方法：** `setGroupInfo`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkSetGroupInfo`
- Android: `Open_im_sdk.setGroupInfo`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupInfo": {
    "groupID": "string (必需)",
    "groupName": "string?",
    "notification": "string?",
    "introduction": "string?",
    "faceURL": "string?",
    "needVerification": "int?",
    "lookMemberInfo": "int?",
    "applyMemberFriend": "int?",
    "...": "其他可选字段"
  }
}
```

**实际传递参数说明：**
- `groupInfo` (Object, 必需): GroupInfo 对象的 JSON 序列化，只需设置需要修改的字段
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupInfo`: 群组信息（必需，只需设置需要修改的字段）
- `operationID`: 操作ID（可选）

**示例：**
```dart
final groupInfo = GroupInfo(
  groupID: 'group_123',
  groupName: '新群名称',
  notification: '群公告内容',
);

await OpenIM.iMManager.groupManager.setGroupInfo(
  groupInfo,
  operationID: 'op_123',
);
```

### getGroupsInfo

查询群组信息。

```dart
Future<List<GroupInfo>> getGroupsInfo({
  required List<String> groupIDList,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求查询指定群组的信息
- 请求地址：`{apiAddr}/group/get_groups_info`（实际由 SDK Core 内部处理）

**底层请求方法：** `getGroupsInfo`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkGetSpecifiedGroupsInfo`
- Android: `Open_im_sdk.getSpecifiedGroupsInfo`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupIDList": ["string"]
}
```

**实际传递参数说明：**
- `groupIDList` (Array<String>, 必需): 群组ID列表
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupIDList`: 群组ID列表（必需）
- `operationID`: 操作ID（可选）

**返回值：** `Future<List<GroupInfo>>`

**示例：**
```dart
final groups = await OpenIM.iMManager.groupManager.getGroupsInfo(
  groupIDList: ['group_123', 'group_456'],
);
```

### getJoinedGroupList

查询已加入的群组列表。

```dart
Future<List<GroupInfo>> getJoinedGroupList({String? operationID})
```

**通信方式：** **HTTP API（短连接）** 或 **本地缓存**
- 优先从本地数据库查询已加入的群组列表
- 如需同步最新数据，会通过 HTTP GET 请求从服务端获取
- 请求地址：`{apiAddr}/group/get_joined_group_list`（实际由 SDK Core 内部处理）

**底层请求方法：** `getJoinedGroupList`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkGetJoinedGroupList`
- Android: `Open_im_sdk.getJoinedGroupList`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string"
}
```

**实际传递参数说明：**
- `operationID` (String, 可选): 操作ID

**参数：**
- `operationID`: 操作ID（可选）

**返回值：** `Future<List<GroupInfo>>`

**示例：**
```dart
final groups = await OpenIM.iMManager.groupManager.getJoinedGroupList();
```

### getJoinedGroupListPage

分页查询已加入的群组列表。

```dart
Future<List<GroupInfo>> getJoinedGroupListPage({
  String? operationID,
  int offset = 0,
  int count = 40,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求分页查询已加入的群组列表
- 请求地址：`{apiAddr}/group/get_joined_group_list_page`（实际由 SDK Core 内部处理）

**底层请求方法：** `getJoinedGroupListPage`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkGetJoinedGroupListPage`
- Android: `Open_im_sdk.getJoinedGroupListPage`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "offset": 0,
  "count": 40
}
```

**实际传递参数说明：**
- `offset` (int, 可选, 默认0): 起始索引
- `count` (int, 可选, 默认40): 每页数量
- `operationID` (String, 可选): 操作ID

**参数：**
- `operationID`: 操作ID（可选）
- `offset`: 起始索引（默认0）
- `count`: 每页数量（默认40）

**返回值：** `Future<List<GroupInfo>>`

**示例：**
```dart
final groups = await OpenIM.iMManager.groupManager.getJoinedGroupListPage(
  offset: 0,
  count: 20,
);
```

### isJoinedGroup

检查用户是否已加入群组。

```dart
Future<bool> isJoinedGroup({
  required String groupID,
  String? operationID,
})
```

**通信方式：** **本地缓存** 或 **HTTP API（短连接）**
- 优先从本地数据库查询
- 如本地无数据，通过 HTTP GET 请求查询服务端
- 请求地址：`{apiAddr}/group/check_group`（实际由 SDK Core 内部处理）

**底层请求方法：** `isJoinGroup`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkIsJoinGroup`
- Android: `Open_im_sdk.isJoinGroup`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string"
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `operationID`: 操作ID（可选）

**返回值：** `Future<bool>`

**示例：**
```dart
final isJoined = await OpenIM.iMManager.groupManager.isJoinedGroup(
  groupID: 'group_123',
);
```

### joinGroup

申请加入群组（需要管理员或群主审批）。

```dart
Future<dynamic> joinGroup({
  required String groupID,
  String? reason,
  String? operationID,
  int joinSource = 3,
  String? ex,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求发送加入群组申请
- 请求地址：`{apiAddr}/group/join_group`（实际由 SDK Core 内部处理）
- 申请提交后，服务端会通过 **WebSocket 长连接** 推送 `onGroupApplicationAdded` 事件通知群主和管理员

**底层请求方法：** `joinGroup`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkJoinGroup`
- Android: `Open_im_sdk.joinGroup`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string",
  "reason": "string?",
  "joinSource": 3,
  "ex": "string?"
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `reason` (String, 可选): 申请理由
- `joinSource` (int, 可选, 默认3): 加入来源（2: 邀请, 3: 搜索, 4: 二维码）
- `ex` (String, 可选): 扩展信息
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `reason`: 申请理由（可选）
- `operationID`: 操作ID（可选）
- `joinSource`: 加入来源（默认3：搜索加入）
  - `2`: 邀请加入
  - `3`: 搜索加入
  - `4`: 二维码加入
- `ex`: 扩展信息（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.joinGroup(
  groupID: 'group_123',
  reason: '想加入这个群组',
  joinSource: 3,
);
```

### quitGroup

退出群组。

```dart
Future<dynamic> quitGroup({
  required String groupID,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求退出群组
- 请求地址：`{apiAddr}/group/quit_group`（实际由 SDK Core 内部处理）
- 退出成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupMemberDeleted` 事件通知其他群成员

**底层请求方法：** `quitGroup`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkQuitGroup`
- Android: `Open_im_sdk.quitGroup`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string"
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `operationID`: 操作ID（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.quitGroup(
  groupID: 'group_123',
);
```

### dismissGroup

解散群组（仅群主可操作）。

```dart
Future<dynamic> dismissGroup({
  required String groupID,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求解散群组
- 请求地址：`{apiAddr}/group/dismiss_group`（实际由 SDK Core 内部处理）
- 解散成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupDismissed` 事件通知所有群成员

**底层请求方法：** `dismissGroup`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkDismissGroup`
- Android: `Open_im_sdk.dismissGroup`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string"
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `operationID`: 操作ID（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.dismissGroup(
  groupID: 'group_123',
);
```

### transferGroupOwner

转让群主。

```dart
Future<dynamic> transferGroupOwner({
  required String groupID,
  required String userID,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求转让群主
- 请求地址：`{apiAddr}/group/transfer_group`（实际由 SDK Core 内部处理）
- 转让成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupInfoChanged` 和 `onGroupMemberInfoChanged` 事件通知群成员

**底层请求方法：** `transferGroupOwner`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkTransferGroupOwner`
- Android: `Open_im_sdk.transferGroupOwner`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string",
  "userID": "string"
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `userID` (String, 必需): 新群主用户ID
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `userID`: 新群主用户ID（必需）
- `operationID`: 操作ID（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.transferGroupOwner(
  groupID: 'group_123',
  userID: 'new_owner_user',
);
```

---

## 成员管理

### inviteUserToGroup

邀请用户加入群组（无需审批，直接加入）。

```dart
Future inviteUserToGroup({
  required String groupID,
  required List<String> userIDList,
  String? reason,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求邀请用户加入群组
- 请求地址：`{apiAddr}/group/invite_user_to_group`（实际由 SDK Core 内部处理）
- 邀请成功后，服务端会通过 **WebSocket 长连接** 推送：
  - `onGroupMemberAdded` 事件给群内所有成员
  - `onJoinedGroupAdded` 事件给被邀请的用户

**底层请求方法：** `inviteUserToGroup`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkInviteUserToGroup`
- Android: `Open_im_sdk.inviteUserToGroup`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string",
  "userIDList": ["string"],
  "reason": "string?"
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `userIDList` (Array<String>, 必需): 用户ID列表
- `reason` (String, 可选): 邀请理由
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `userIDList`: 用户ID列表（必需）
- `reason`: 邀请理由（可选）
- `operationID`: 操作ID（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.inviteUserToGroup(
  groupID: 'group_123',
  userIDList: ['user1', 'user2', 'user3'],
  reason: '欢迎加入我们的群组',
);
```

### kickGroupMember

移除群成员。

```dart
Future kickGroupMember({
  required String groupID,
  required List<String> userIDList,
  String? reason,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求移除群成员
- 请求地址：`{apiAddr}/group/kick_group`（实际由 SDK Core 内部处理）
- 移除成功后，服务端会通过 **WebSocket 长连接** 推送：
  - `onGroupMemberDeleted` 事件给群内所有成员
  - `onJoinedGroupDeleted` 事件给被移除的用户

**底层请求方法：** `kickGroupMember`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkKickGroupMember`
- Android: `Open_im_sdk.kickGroupMember`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string",
  "userIDList": ["string"],
  "reason": "string?"
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `userIDList` (Array<String>, 必需): 要移除的用户ID列表
- `reason` (String, 可选): 移除理由
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `userIDList`: 要移除的用户ID列表（必需）
- `reason`: 移除理由（可选）
- `operationID`: 操作ID（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.kickGroupMember(
  groupID: 'group_123',
  userIDList: ['user1'],
  reason: '违反群规',
);
```

### getGroupMembersInfo

查询群成员信息。

```dart
Future<List<GroupMembersInfo>> getGroupMembersInfo({
  required String groupID,
  required List<String> userIDList,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求查询指定群成员的信息
- 请求地址：`{apiAddr}/group/get_group_members_info`（实际由 SDK Core 内部处理）

**底层请求方法：** `getGroupMembersInfo`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkGetSpecifiedGroupMembersInfo`
- Android: `Open_im_sdk.getSpecifiedGroupMembersInfo`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string",
  "userIDList": ["string"]
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `userIDList` (Array<String>, 必需): 用户ID列表
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `userIDList`: 用户ID列表（必需）
- `operationID`: 操作ID（可选）

**返回值：** `Future<List<GroupMembersInfo>>`

**示例：**
```dart
final members = await OpenIM.iMManager.groupManager.getGroupMembersInfo(
  groupID: 'group_123',
  userIDList: ['user1', 'user2'],
);
```

### getGroupMemberList

分页获取群成员列表。

```dart
Future<List<GroupMembersInfo>> getGroupMemberList({
  required String groupID,
  int filter = 0,
  int offset = 0,
  int count = 0,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）** 或 **本地缓存**
- 优先从本地数据库查询群成员列表
- 如需同步最新数据，通过 HTTP POST 请求从服务端获取
- 请求地址：`{apiAddr}/group/get_group_member_list`（实际由 SDK Core 内部处理）

**底层请求方法：** `getGroupMemberList`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkGetGroupMemberList`
- Android: `Open_im_sdk.getGroupMemberList`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string",
  "filter": 0,
  "offset": 0,
  "count": 0
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `filter` (int, 可选, 默认0): 成员筛选（0: 全部, 1: 群主, 2: 管理员, 3: 普通成员, 4: 管理员+普通成员, 5: 群主+管理员）
- `offset` (int, 可选, 默认0): 起始索引
- `count` (int, 可选, 默认0): 总数（0表示获取全部）
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `filter`: 成员筛选（默认0：全部）
  - `0`: 全部成员
  - `1`: 群主
  - `2`: 管理员
  - `3`: 普通成员
  - `4`: 管理员 + 普通成员
  - `5`: 群主 + 管理员
- `offset`: 起始索引（默认0）
- `count`: 总数（默认0，表示获取全部）
- `operationID`: 操作ID（可选）

**返回值：** `Future<List<GroupMembersInfo>>`

**示例：**
```dart
// 获取所有管理员
final admins = await OpenIM.iMManager.groupManager.getGroupMemberList(
  groupID: 'group_123',
  filter: 2, // 只获取管理员
  offset: 0,
  count: 100,
);
```

### getGroupMemberListMap

分页获取群成员列表（返回Map格式）。

```dart
Future<List<dynamic>> getGroupMemberListMap({
  required String groupID,
  int filter = 0,
  int offset = 0,
  int count = 0,
  String? operationID,
})
```

**底层请求方法：** `getGroupMemberList`（与 `getGroupMemberList` 使用相同的方法，但返回格式不同）

**请求参数（Map）：** 同 `getGroupMemberList`

**参数：** 同 `getGroupMemberList`

**返回值：** `Future<List<dynamic>>`（返回 Map 格式而非对象格式）

### getGroupMemberListByJoinTime

根据加入时间获取群成员列表。

```dart
Future<List<GroupMembersInfo>> getGroupMemberListByJoinTime({
  required String groupID,
  int offset = 0,
  int count = 0,
  int joinTimeBegin = 0,
  int joinTimeEnd = 0,
  List<String> filterUserIDList = const [],
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求按加入时间筛选群成员列表
- 请求地址：`{apiAddr}/group/get_group_member_list_by_join_time`（实际由 SDK Core 内部处理）

**底层请求方法：** `getGroupMemberListByJoinTimeFilter`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkGetGroupMemberListByJoinTimeFilter`
- Android: `Open_im_sdk.getGroupMemberListByJoinTimeFilter`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string",
  "offset": 0,
  "count": 0,
  "joinTimeBegin": 0,
  "joinTimeEnd": 0,
  "excludeUserIDList": ["string"]
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `offset` (int, 可选, 默认0): 起始索引
- `count` (int, 可选, 默认0): 总数
- `joinTimeBegin` (int, 可选, 默认0): 加入时间开始（时间戳）
- `joinTimeEnd` (int, 可选, 默认0): 加入时间结束（时间戳）
- `excludeUserIDList` (Array<String>, 可选): 排除的用户ID列表
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `offset`: 起始索引（默认0）
- `count`: 总数（默认0）
- `joinTimeBegin`: 加入时间开始（时间戳，默认0）
- `joinTimeEnd`: 加入时间结束（时间戳，默认0）
- `filterUserIDList`: 排除的用户ID列表（默认空）
- `operationID`: 操作ID（可选）

**返回值：** `Future<List<GroupMembersInfo>>`

**示例：**
```dart
final members = await OpenIM.iMManager.groupManager.getGroupMemberListByJoinTime(
  groupID: 'group_123',
  offset: 0,
  count: 50,
  joinTimeBegin: 1640000000, // 2021-12-21
  joinTimeEnd: 1672531199,   // 2022-12-31
);
```

### getGroupOwnerAndAdmin

获取群主和管理员列表。

```dart
Future<List<GroupMembersInfo>> getGroupOwnerAndAdmin({
  required String groupID,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）** 或 **本地缓存**
- 优先从本地数据库查询群主和管理员信息
- 如需同步最新数据，通过 HTTP POST 请求从服务端获取
- 请求地址：`{apiAddr}/group/get_group_owner_and_admin`（实际由 SDK Core 内部处理）

**底层请求方法：** `getGroupMemberOwnerAndAdmin`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkGetGroupMemberOwnerAndAdmin`
- Android: `Open_im_sdk.getGroupMemberOwnerAndAdmin`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string"
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `operationID`: 操作ID（可选）

**返回值：** `Future<List<GroupMembersInfo>>`

**示例：**
```dart
final admins = await OpenIM.iMManager.groupManager.getGroupOwnerAndAdmin(
  groupID: 'group_123',
);
```

### setGroupMemberInfo

设置群成员信息。

```dart
Future<dynamic> setGroupMemberInfo({
  required SetGroupMemberInfo groupMembersInfo,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求设置群成员信息（如角色、昵称等）
- 请求地址：`{apiAddr}/group/set_group_member_info`（实际由 SDK Core 内部处理）
- 设置成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupMemberInfoChanged` 事件通知群成员

**底层请求方法：** `setGroupMemberInfo`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkSetGroupMemberInfo`
- Android: `Open_im_sdk.setGroupMemberInfo`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "info": {
    "groupID": "string",
    "userID": "string",
    "roleLevel": 20,
    "nickname": "string?",
    "faceURL": "string?",
    "ex": "string?"
  }
}
```

**实际传递参数说明：**
- `info` (Object, 必需): SetGroupMemberInfo 对象的 JSON 序列化
  - `groupID` (String, 必需): 群组ID
  - `userID` (String, 必需): 用户ID
  - `roleLevel` (int, 可选): 角色级别（见 GroupRoleLevel）
  - `nickname` (String, 可选): 群昵称
  - `faceURL` (String, 可选): 头像URL
  - `ex` (String, 可选): 扩展信息
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupMembersInfo`: 群成员信息（必需）
- `operationID`: 操作ID（可选）

**SetGroupMemberInfo 字段：**
- `groupID`: 群组ID（必需）
- `userID`: 用户ID（必需）
- `roleLevel`: 角色级别（可选，见 GroupRoleLevel）
- `nickname`: 群昵称（可选）
- `faceURL`: 头像URL（可选）
- `ex`: 扩展信息（可选）

**示例：**
```dart
final memberInfo = SetGroupMemberInfo(
  groupID: 'group_123',
  userID: 'user1',
  nickname: '新昵称',
  roleLevel: GroupRoleLevel.admin, // 设置为管理员
);

await OpenIM.iMManager.groupManager.setGroupMemberInfo(
  groupMembersInfo: memberInfo,
);
```

### getUsersInGroup

查询用户在群组中的信息。

```dart
Future<dynamic> getUsersInGroup(
  String groupID,
  List<String> userIDs, {
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求查询指定用户在群组中的信息
- 请求地址：`{apiAddr}/group/get_users_in_group`（实际由 SDK Core 内部处理）

**底层请求方法：** `getUsersInGroup`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkGetUsersInGroup`
- Android: `Open_im_sdk.getUsersInGroup`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string",
  "userIDs": ["string"]
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `userIDs` (Array<String>, 必需): 用户ID列表
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `userIDs`: 用户ID列表（必需）
- `operationID`: 操作ID（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.getUsersInGroup(
  'group_123',
  ['user1', 'user2'],
);
```

---

## 群组申请

### getGroupApplicationListAsRecipient

获取作为接收方的群组申请列表（作为群主或管理员收到的申请）。

```dart
Future<List<GroupApplicationInfo>> getGroupApplicationListAsRecipient({
  GetGroupApplicationListAsRecipientReq? req,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求查询收到的群组申请列表
- 请求地址：`{apiAddr}/group/get_group_application_list_as_recipient`（实际由 SDK Core 内部处理）
- 新的申请会通过 **WebSocket 长连接** 实时推送 `onGroupApplicationAdded` 事件

**底层请求方法：** `getGroupApplicationListAsRecipient`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkGetGroupApplicationListAsRecipient`
- Android: `Open_im_sdk.getGroupApplicationListAsRecipient`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "req": {
    "groupIDs": ["string"],
    "handleResults": [int],
    "offset": 0,
    "count": 20
  }
}
```

**实际传递参数说明：**
- `req` (Object, 可选): 请求参数对象
  - `groupIDs` (Array<String>, 可选): 群组ID列表
  - `handleResults` (Array<int>, 可选): 处理结果筛选（-1: 已拒绝, 1: 已同意）
  - `offset` (int, 必需): 起始索引
  - `count` (int, 必需): 每页数量
- `operationID` (String, 可选): 操作ID

**参数：**
- `req`: 请求参数（可选）
  - `groupIDs`: 群组ID列表（默认空）
  - `handleResults`: 处理结果筛选（默认空）
    - `-1`: 已拒绝
    - `1`: 已同意
  - `offset`: 起始索引（必需）
  - `count`: 每页数量（必需）
- `operationID`: 操作ID（可选）

**返回值：** `Future<List<GroupApplicationInfo>>`

**示例：**
```dart
final req = GetGroupApplicationListAsRecipientReq(
  groupIDs: ['group_123'],
  handleResults: [], // 空表示获取所有状态
  offset: 0,
  count: 20,
);

final applications = await OpenIM.iMManager.groupManager
    .getGroupApplicationListAsRecipient(req: req);
```

### getGroupApplicationListAsApplicant

获取作为申请方的群组申请列表（用户自己发出的申请）。

```dart
Future<List<GroupApplicationInfo>> getGroupApplicationListAsApplicant({
  GetGroupApplicationListAsApplicantReq? req,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求查询自己发出的群组申请列表
- 请求地址：`{apiAddr}/group/get_group_application_list_as_applicant`（实际由 SDK Core 内部处理）
- 申请被处理后会通过 **WebSocket 长连接** 推送 `onGroupApplicationAccepted` 或 `onGroupApplicationRejected` 事件

**底层请求方法：** `getGroupApplicationListAsApplicant`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkGetGroupApplicationListAsApplicant`
- Android: `Open_im_sdk.getGroupApplicationListAsApplicant`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "req": {
    "groupIDs": ["string"],
    "handleResults": [int],
    "offset": 0,
    "count": 20
  }
}
```

**实际传递参数说明：**
- `req` (Object, 可选): 请求参数对象（同 `getGroupApplicationListAsRecipient`）
  - `groupIDs` (Array<String>, 可选): 群组ID列表
  - `handleResults` (Array<int>, 可选): 处理结果筛选
  - `offset` (int, 必需): 起始索引
  - `count` (int, 必需): 每页数量
- `operationID` (String, 可选): 操作ID

**参数：**
- `req`: 请求参数（可选，同 `getGroupApplicationListAsRecipient`）
- `operationID`: 操作ID（可选）

**返回值：** `Future<List<GroupApplicationInfo>>`

**示例：**
```dart
final req = GetGroupApplicationListAsApplicantReq(
  offset: 0,
  count: 20,
);

final myApplications = await OpenIM.iMManager.groupManager
    .getGroupApplicationListAsApplicant(req: req);
```

### acceptGroupApplication

接受群组申请（作为管理员或群主）。

```dart
Future<dynamic> acceptGroupApplication({
  required String groupID,
  required String userID,
  String? handleMsg,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求接受群组申请
- 请求地址：`{apiAddr}/group/accept_group_application`（实际由 SDK Core 内部处理）
- 接受成功后，服务端会通过 **WebSocket 长连接** 推送：
  - `onGroupApplicationAccepted` 事件给申请人
  - `onGroupMemberAdded` 事件给群内所有成员
  - `onJoinedGroupAdded` 事件给被接受的用户

**底层请求方法：** `acceptGroupApplication`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkAcceptGroupApplication`
- Android: `Open_im_sdk.acceptGroupApplication`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string",
  "userID": "string",
  "handleMsg": "string?"
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `userID` (String, 必需): 申请用户ID
- `handleMsg` (String, 可选): 处理消息
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `userID`: 申请用户ID（必需）
- `handleMsg`: 处理消息（可选）
- `operationID`: 操作ID（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.acceptGroupApplication(
  groupID: 'group_123',
  userID: 'user1',
  handleMsg: '欢迎加入',
);
```

### refuseGroupApplication

拒绝群组申请（作为管理员或群主）。

```dart
Future<dynamic> refuseGroupApplication({
  required String groupID,
  required String userID,
  String? handleMsg,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求拒绝群组申请
- 请求地址：`{apiAddr}/group/refuse_group_application`（实际由 SDK Core 内部处理）
- 拒绝成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupApplicationRejected` 事件给申请人

**底层请求方法：** `refuseGroupApplication`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkRefuseGroupApplication`
- Android: `Open_im_sdk.refuseGroupApplication`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string",
  "userID": "string",
  "handleMsg": "string?"
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `userID` (String, 必需): 申请用户ID
- `handleMsg` (String, 可选): 处理消息
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `userID`: 申请用户ID（必需）
- `handleMsg`: 处理消息（可选）
- `operationID`: 操作ID（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.refuseGroupApplication(
  groupID: 'group_123',
  userID: 'user1',
  handleMsg: '暂不符合加入条件',
);
```

### getGroupApplicationUnhandledCount

获取未处理的群组申请数量。

```dart
Future<int> getGroupApplicationUnhandledCount(
  GetGroupApplicationUnhandledCountReq req, {
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求查询未处理的群组申请数量
- 请求地址：`{apiAddr}/group/get_group_application_unhandled_count`（实际由 SDK Core 内部处理）

**底层请求方法：** `getGroupApplicationUnhandledCount`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkGetGroupApplicationUnhandledCount`
- Android: `Open_im_sdk.getGroupApplicationUnhandledCount`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "req": {
    "time": 0
  }
}
```

**实际传递参数说明：**
- `req` (Object, 必需): 请求参数对象
  - `time` (int, 可选, 默认0): 时间戳
- `operationID` (String, 可选): 操作ID

**参数：**
- `req`: 请求参数
  - `time`: 时间戳（默认0）
- `operationID`: 操作ID（可选）

**返回值：** `Future<int>`

**示例：**
```dart
final req = GetGroupApplicationUnhandledCountReq(time: 0);
final count = await OpenIM.iMManager.groupManager
    .getGroupApplicationUnhandledCount(req);
print('未处理申请数: $count');
```

---

## 搜索功能

### searchGroups

搜索群组。

```dart
Future<List<GroupInfo>> searchGroups({
  List<String> keywordList = const [],
  bool isSearchGroupID = false,
  bool isSearchGroupName = false,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求搜索群组
- 请求地址：`{apiAddr}/group/search_groups`（实际由 SDK Core 内部处理）

**底层请求方法：** `searchGroups`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkSearchGroups`
- Android: `Open_im_sdk.searchGroups`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "searchParam": {
    "keywordList": ["string"],
    "isSearchGroupID": false,
    "isSearchGroupName": false
  }
}
```

**实际传递参数说明：**
- `searchParam` (Object, 必需): 搜索参数对象
  - `keywordList` (Array<String>, 可选): 搜索关键词列表（目前仅支持一个关键词）
  - `isSearchGroupID` (bool, 可选, 默认false): 是否按群组ID搜索
  - `isSearchGroupName` (bool, 可选, 默认false): 是否按群组名称搜索
- `operationID` (String, 可选): 操作ID

**注意：** `isSearchGroupID` 和 `isSearchGroupName` 不能同时为 false

**参数：**
- `keywordList`: 搜索关键词列表（默认空，目前仅支持一个关键词）
- `isSearchGroupID`: 是否按群组ID搜索（默认false）
- `isSearchGroupName`: 是否按群组名称搜索（默认false）
- `operationID`: 操作ID（可选）

**返回值：** `Future<List<GroupInfo>>`

**示例：**
```dart
final groups = await OpenIM.iMManager.groupManager.searchGroups(
  keywordList: ['测试群'],
  isSearchGroupName: true,
);
```

### searchGroupMembers

搜索群成员。

```dart
Future<List<GroupMembersInfo>> searchGroupMembers({
  required String groupID,
  List<String> keywordList = const [],
  bool isSearchUserID = false,
  bool isSearchMemberNickname = false,
  int offset = 0,
  int count = 40,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求搜索群成员
- 请求地址：`{apiAddr}/group/search_group_members`（实际由 SDK Core 内部处理）

**底层请求方法：** `searchGroupMembers`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkSearchGroupMembers`
- Android: `Open_im_sdk.searchGroupMembers`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "searchParam": {
    "groupID": "string",
    "keywordList": ["string"],
    "isSearchUserID": false,
    "isSearchMemberNickname": false,
    "offset": 0,
    "count": 40
  }
}
```

**实际传递参数说明：**
- `searchParam` (Object, 必需): 搜索参数对象
  - `groupID` (String, 必需): 群组ID
  - `keywordList` (Array<String>, 可选): 搜索关键词列表（目前仅支持一个关键词）
  - `isSearchUserID` (bool, 可选, 默认false): 是否按成员ID搜索
  - `isSearchMemberNickname` (bool, 可选, 默认false): 是否按成员昵称搜索
  - `offset` (int, 可选, 默认0): 起始索引
  - `count` (int, 可选, 默认40): 每页数量
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `keywordList`: 搜索关键词列表（默认空，目前仅支持一个关键词）
- `isSearchUserID`: 是否按成员ID搜索（默认false）
- `isSearchMemberNickname`: 是否按成员昵称搜索（默认false）
- `offset`: 起始索引（默认0）
- `count`: 每页数量（默认40）
- `operationID`: 操作ID（可选）

**返回值：** `Future<List<GroupMembersInfo>>`

**示例：**
```dart
final members = await OpenIM.iMManager.groupManager.searchGroupMembers(
  groupID: 'group_123',
  keywordList: ['张三'],
  isSearchMemberNickname: true,
  offset: 0,
  count: 20,
);
```

### searchGroupMembersListMap

搜索群成员（返回Map格式）。

```dart
Future<List<dynamic>> searchGroupMembersListMap({
  required String groupID,
  List<String> keywordList = const [],
  bool isSearchUserID = false,
  bool isSearchMemberNickname = false,
  int offset = 0,
  int count = 40,
  String? operationID,
})
```

**底层请求方法：** `searchGroupMembers`（与 `searchGroupMembers` 使用相同的方法，但返回格式不同）

**请求参数（Map）：** 同 `searchGroupMembers`

**参数：** 同 `searchGroupMembers`

**返回值：** `Future<List<dynamic>>`（返回 Map 格式而非对象格式）

---

## 静音管理

### changeGroupMute

启用或禁用群组静音（禁止所有群成员发送消息）。

```dart
Future<dynamic> changeGroupMute({
  required String groupID,
  required bool mute,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求设置群组静音状态
- 请求地址：`{apiAddr}/group/mute_group`（实际由 SDK Core 内部处理）
- 设置成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupInfoChanged` 事件通知所有群成员

**底层请求方法：** `changeGroupMute`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkChangeGroupMute`
- Android: `Open_im_sdk.changeGroupMute`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string",
  "mute": true
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `mute` (bool, 必需): 是否静音（true: 启用, false: 禁用）
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `mute`: 是否静音（true：启用，false：禁用）
- `operationID`: 操作ID（可选）

**示例：**
```dart
// 启用群组静音
await OpenIM.iMManager.groupManager.changeGroupMute(
  groupID: 'group_123',
  mute: true,
);

// 解除群组静音
await OpenIM.iMManager.groupManager.changeGroupMute(
  groupID: 'group_123',
  mute: false,
);
```

### changeGroupMemberMute

禁言群成员。

```dart
Future<dynamic> changeGroupMemberMute({
  required String groupID,
  required String userID,
  int seconds = 0,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求设置群成员禁言状态
- 请求地址：`{apiAddr}/group/mute_group_member`（实际由 SDK Core 内部处理）
- 设置成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupMemberInfoChanged` 事件通知群成员

**底层请求方法：** `changeGroupMemberMute`

**底层 SDK 方法（iOS/Android）：**
- iOS: `Open_im_sdkChangeGroupMemberMute`
- Android: `Open_im_sdk.changeGroupMemberMute`

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupID": "string",
  "userID": "string",
  "seconds": 0
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `userID` (String, 必需): 成员ID
- `seconds` (int, 可选, 默认0): 禁言时长（秒，0表示解除禁言）
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `userID`: 成员ID（必需）
- `seconds`: 禁言时长（秒，设置为0表示解除禁言，默认0）
- `operationID`: 操作ID（可选）

**示例：**
```dart
// 禁言30分钟（1800秒）
await OpenIM.iMManager.groupManager.changeGroupMemberMute(
  groupID: 'group_123',
  userID: 'user1',
  seconds: 1800,
);

// 解除禁言
await OpenIM.iMManager.groupManager.changeGroupMemberMute(
  groupID: 'group_123',
  userID: 'user1',
  seconds: 0,
);
```

---

## 权限管理

### setGroupVerification（已弃用）

设置群组加入验证方式。

```dart
@Deprecated('Use [setGroupInfo] instead')
Future<dynamic> setGroupVerification({
  required String groupID,
  required int needVerification,
  String? operationID,
})
```

**建议使用：** `setGroupInfo` 方法

**示例（使用 setGroupInfo）：**
```dart
final groupInfo = GroupInfo(
  groupID: 'group_123',
  needVerification: GroupVerification.allNeedVerification,
);

await OpenIM.iMManager.groupManager.setGroupInfo(groupInfo);
```

### setGroupLookMemberInfo（已弃用）

允许/禁止成员通过群组查看成员信息。

```dart
@Deprecated('Use [setGroupInfo] instead')
Future<dynamic> setGroupLookMemberInfo({
  required String groupID,
  required int status,
  String? operationID,
})
```

**建议使用：** `setGroupInfo` 方法

**示例（使用 setGroupInfo）：**
```dart
final groupInfo = GroupInfo(
  groupID: 'group_123',
  lookMemberInfo: 1, // 0: 禁用, 1: 启用
);

await OpenIM.iMManager.groupManager.setGroupInfo(groupInfo);
```

### setGroupApplyMemberFriend（已弃用）

允许/禁止成员通过群组添加好友。

```dart
@Deprecated('Use [setGroupInfo] instead')
Future<dynamic> setGroupApplyMemberFriend({
  required String groupID,
  required int status,
  String? operationID,
})
```

**建议使用：** `setGroupInfo` 方法

**示例（使用 setGroupInfo）：**
```dart
final groupInfo = GroupInfo(
  groupID: 'group_123',
  applyMemberFriend: 1, // 0: 禁用, 1: 启用
);

await OpenIM.iMManager.groupManager.setGroupInfo(groupInfo);
```

### setGroupMemberNickname（已弃用）

设置群成员昵称。

```dart
@Deprecated('Use [setGroupMemberInfo] instead')
Future<dynamic> setGroupMemberNickname({
  required String groupID,
  required String userID,
  String? groupNickname,
  String? operationID,
})
```

**建议使用：** `setGroupMemberInfo` 方法

### setGroupMemberRoleLevel（已弃用）

设置群成员角色级别。

```dart
@Deprecated('Use [setGroupMemberInfo] instead')
Future<dynamic> setGroupMemberRoleLevel({
  required String groupID,
  required String userID,
  required int roleLevel,
  String? operationID,
})
```

**建议使用：** `setGroupMemberInfo` 方法

---

## 专用字段管理接口

### setGroupLocation

设置群组地理位置。

```dart
Future<dynamic> setGroupLocation({
  required String groupID,
  required double latitude,
  required double longitude,
  String? locationAddress,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求设置群组地理位置
- 请求地址：`{apiAddr}/group/set_group_info`（实际由 SDK Core 内部处理）
- 设置成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupInfoChanged` 事件通知所有群成员

**底层请求方法：** `setGroupInfo`（内部调用）

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupInfo": {
    "groupID": "string",
    "location": "{\"type\":\"Point\",\"coordinates\":[longitude,latitude]}",
    "latitude": 0.0,
    "longitude": 0.0,
    "locationAddress": "string?"
  }
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `latitude` (double, 必需): 纬度（-90.0 到 90.0）
- `longitude` (double, 必需): 经度（-180.0 到 180.0）
- `locationAddress` (String, 可选): 地址描述
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `latitude`: 纬度（必需，范围 -90.0 到 90.0）
- `longitude`: 经度（必需，范围 -180.0 到 180.0）
- `locationAddress`: 地址描述（可选）
- `operationID`: 操作ID（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.setGroupLocation(
  groupID: 'group_123',
  latitude: 39.916527,
  longitude: 116.397128,
  locationAddress: '北京市东城区天安门广场1号',
);
```

### setGroupTags

设置群组标签。

```dart
Future<dynamic> setGroupTags({
  required String groupID,
  required List<String> tagIDs,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求设置群组标签
- 请求地址：`{apiAddr}/group/set_group_info`（实际由 SDK Core 内部处理）
- 设置成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupInfoChanged` 事件通知所有群成员

**底层请求方法：** `setGroupInfo`（内部调用）

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupInfo": {
    "groupID": "string",
    "tagIDs": ["string"]
  }
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `tagIDs` (Array<String>, 必需): 标签ID数组（空数组表示清空所有标签）
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `tagIDs`: 标签ID列表（必需，空列表表示清空所有标签）
- `operationID`: 操作ID（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.setGroupTags(
  groupID: 'group_123',
  tagIDs: ['tag_001', 'tag_002'],
);
```

### setGroupPublic

设置群组是否公开。

```dart
Future<dynamic> setGroupPublic({
  required String groupID,
  required int isPublic,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求设置群组公开状态
- 请求地址：`{apiAddr}/group/set_group_info`（实际由 SDK Core 内部处理）
- 设置成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupInfoChanged` 事件通知所有群成员

**底层请求方法：** `setGroupInfo`（内部调用）

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupInfo": {
    "groupID": "string",
    "isPublic": 0
  }
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `isPublic` (int, 必需): 0-不公开，1-公开
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `isPublic`: 是否公开（必需，0: 不公开, 1: 公开）
- `operationID`: 操作ID（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.setGroupPublic(
  groupID: 'group_123',
  isPublic: 1, // 1: 公开, 0: 不公开
);
```

### setGroupMaxMemberCount

设置群组成员数量限制。

```dart
Future<dynamic> setGroupMaxMemberCount({
  required String groupID,
  required int maxMemberCount,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求设置群组成员数量限制
- 请求地址：`{apiAddr}/group/set_group_info`（实际由 SDK Core 内部处理）
- 设置成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupInfoChanged` 事件通知所有群成员

**底层请求方法：** `setGroupInfo`（内部调用）

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupInfo": {
    "groupID": "string",
    "maxMemberCount": 500
  }
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `maxMemberCount` (int, 必需): 最大成员数（0表示无限制）
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `maxMemberCount`: 最大成员数（必需，0表示无限制）
- `operationID`: 操作ID（可选）

**示例：**
```dart
await OpenIM.iMManager.groupManager.setGroupMaxMemberCount(
  groupID: 'group_123',
  maxMemberCount: 500, // 0 表示无限制
);
```

### setGroupAdministrativeRegion

设置群组行政区域。

```dart
Future<dynamic> setGroupAdministrativeRegion({
  required String groupID,
  String? country,
  String? city,
  String? district,
  Map<String, dynamic>? administrativeRegion,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求设置群组行政区域
- 请求地址：`{apiAddr}/group/set_group_info`（实际由 SDK Core 内部处理）
- 设置成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupInfoChanged` 事件通知所有群成员

**底层请求方法：** `setGroupInfo`（内部调用）

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupInfo": {
    "groupID": "string",
    "country": "string?",
    "city": "string?",
    "district": "string?",
    "administrativeRegion": "string?"
  }
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `country` (String, 可选): 国家代码（ISO 3166-1 alpha-2）
- `city` (String, 可选): 城市名称
- `district` (String, 可选): 区/县/行政区名称
- `administrativeRegion` (Map<String, dynamic>?, 可选): 完整行政区域信息（JSON对象，内部转换为字符串）
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `country`: 国家代码（可选，ISO 3166-1 alpha-2格式，如"CN"）
- `city`: 城市名称（可选）
- `district`: 区/县/行政区名称（可选）
- `administrativeRegion`: 完整行政区域信息（可选，Map格式，内部会转换为JSON字符串）
- `operationID`: 操作ID（可选）

**注意：** 至少需要提供一个字段

**示例：**
```dart
await OpenIM.iMManager.groupManager.setGroupAdministrativeRegion(
  groupID: 'group_123',
  country: 'CN',
  city: '北京',
  district: '东城区',
  administrativeRegion: {
    'country': 'CN',
    'country_name': '中国',
    'province': '北京市',
    'city': '北京市',
    'district': '东城区',
    'street': '天安门广场',
    'postal_code': '100006',
    'full_address': '中国北京市东城区天安门广场',
  },
);
```

### setGroupSettings

设置群组设置。

```dart
Future<dynamic> setGroupSettings({
  required String groupID,
  required String settings,
  String? operationID,
})
```

**通信方式：** **HTTP API（短连接）**
- 通过 HTTP POST 请求设置群组设置
- 请求地址：`{apiAddr}/group/set_group_info`（实际由 SDK Core 内部处理）
- 设置成功后，服务端会通过 **WebSocket 长连接** 推送 `onGroupInfoChanged` 事件通知所有群成员

**底层请求方法：** `setGroupInfo`（内部调用）

**请求参数（Map）：**
```json
{
  "ManagerName": "groupManager",
  "operationID": "string",
  "groupInfo": {
    "groupID": "string",
    "settings": "string"
  }
}
```

**实际传递参数说明：**
- `groupID` (String, 必需): 群组ID
- `settings` (String, 必需): 群组设置（JSON格式字符串）
- `operationID` (String, 可选): 操作ID

**参数：**
- `groupID`: 群组ID（必需）
- `settings`: 群组设置（必需，JSON格式字符串）
- `operationID`: 操作ID（可选）

**示例：**
```dart
import 'dart:convert';

final settings = jsonEncode({
  'allow_member_invite': true,
  'mute_all': false,
  'auto_approve': false,
  'welcome_message': '欢迎加入群组',
  'custom_settings': {
    'theme': 'dark',
    'notification_sound': 'default',
  },
});

await OpenIM.iMManager.groupManager.setGroupSettings(
  groupID: 'group_123',
  settings: settings,
);
```

---

## 数据模型

### GroupInfo

群组信息模型。

**基础字段：**

| 字段 | 类型 | 说明 |
|------|------|------|
| `groupID` | String | 群组ID（必需） |
| `groupName` | String? | 群组名称 |
| `notification` | String? | 群公告 |
| `introduction` | String? | 群简介 |
| `faceURL` | String? | 群头像 |
| `ownerUserID` | String? | 群主用户ID |
| `createTime` | int? | 创建时间（毫秒时间戳） |
| `memberCount` | int? | 群成员数量 |
| `status` | int? | 群状态：0-正常，1-封禁，2-解散，3-禁言 |
| `creatorUserID` | String? | 创建者用户ID |
| `groupType` | int? | 群类型（见 GroupType） |
| `ex` | String? | 扩展信息（JSON格式） |
| `needVerification` | int? | 入群验证方式（见 GroupVerification） |
| `lookMemberInfo` | int? | 是否允许查看成员信息：0-禁用，1-启用 |
| `applyMemberFriend` | int? | 是否允许通过群添加好友：0-禁用，1-启用 |
| `notificationUpdateTime` | int? | 公告更新时间（毫秒时间戳） |
| `notificationUserID` | String? | 公告发布者用户ID |

**地理位置相关字段：**

| 字段 | 类型 | 说明 |
|------|------|------|
| `location` | String? | 群组地理位置（GeoJSON格式，JSON字符串） |
| `latitude` | double? | 纬度（-90.0 到 90.0） |
| `longitude` | double? | 经度（-180.0 到 180.0） |
| `locationAddress` | String? | 地址描述（可读的地址文本） |

**群组设置字段：**

| 字段 | 类型 | 说明 |
|------|------|------|
| `settings` | String? | 群组设置（JSON格式字符串） |
| `isPublic` | int? | 是否公开群：0-不公开，1-公开 |
| `maxMemberCount` | int? | 群成员数量限制（0表示无限制） |

**行政区域字段：**

| 字段 | 类型 | 说明 |
|------|------|------|
| `country` | String? | 国家代码（ISO 3166-1 alpha-2） |
| `city` | String? | 城市名称 |
| `district` | String? | 区/县/行政区名称 |
| `administrativeRegion` | String? | 完整行政区域信息（JSON格式字符串） |

**标签字段：**

| 字段 | 类型 | 说明 |
|------|------|------|
| `tagIDs` | List<String>? | 群组标签ID集合 |

**详细字段说明请参考：** [群组字段说明文档](./群组字段说明文档.md)

### GroupMembersInfo

群成员信息模型。

**字段说明：**

| 字段 | 类型 | 说明 |
|------|------|------|
| `groupID` | String? | 群组ID |
| `userID` | String? | 用户ID |
| `nickname` | String? | 群昵称 |
| `faceURL` | String? | 头像 |
| `roleLevel` | int? | 角色级别（见 GroupRoleLevel） |
| `joinTime` | int? | 加入时间（时间戳） |
| `joinSource` | int? | 加入来源：2-邀请，3-搜索，4-二维码 |
| `operatorUserID` | String? | 操作者用户ID |
| `ex` | String? | 扩展信息 |
| `muteEndTime` | int? | 禁言结束时间（秒） |
| `appManagerLevel` | int? | 申请管理员级别 |
| `inviterUserID` | String? | 邀请者用户ID |

### GroupApplicationInfo

群组申请信息模型。

**字段说明：**

| 字段 | 类型 | 说明 |
|------|------|------|
| `groupID` | String? | 群组ID |
| `groupName` | String? | 群组名称 |
| `userID` | String? | 申请用户ID |
| `nickname` | String? | 申请用户昵称 |
| `reqMsg` | String? | 申请消息 |
| `handledMsg` | String? | 处理消息 |
| `reqTime` | int? | 申请时间（时间戳） |
| `handleResult` | int? | 处理结果：-1-拒绝，1-同意 |
| `handleUserID` | String? | 处理者用户ID |
| `handledTime` | int? | 处理时间（时间戳） |
| `joinSource` | int? | 加入来源：2-邀请，3-搜索，4-二维码 |
| `inviterUserID` | String? | 邀请者用户ID |

### SetGroupMemberInfo

设置群成员信息请求模型。

**字段说明：**

| 字段 | 类型 | 说明 |
|------|------|------|
| `groupID` | String | 群组ID（必需） |
| `userID` | String | 用户ID（必需） |
| `roleLevel` | int? | 角色级别（见 GroupRoleLevel） |
| `nickname` | String? | 群昵称 |
| `faceURL` | String? | 头像URL |
| `ex` | String? | 扩展信息 |

---

## 枚举类型

### GroupType

群组类型。

```dart
class GroupType {
  /// 普通群组（v3版本已弃用）
  @Deprecated('Use work instead')
  static const int general = 0;

  /// 工作群
  static const int work = 2;
}
```

### GroupRoleLevel

群成员角色级别。

```dart
class GroupRoleLevel {
  /// 群主
  static const owner = 100;

  /// 管理员
  static const admin = 60;

  /// 普通成员
  static const member = 20;
}
```

### GroupVerification

群组加入验证设置。

```dart
class GroupVerification {
  /// 申请加群和邀请入群直接通过
  static const int applyNeedVerificationInviteDirectly = 0;

  /// 所有人进群需要验证，群主管理员邀请直接通过
  static const int allNeedVerification = 1;

  /// 直接加入
  static const int directly = 2;
}
```

### 成员筛选器（filter）

用于 `getGroupMemberList` 方法的筛选参数：

- `0`: 全部成员
- `1`: 群主
- `2`: 管理员
- `3`: 普通成员
- `4`: 管理员 + 普通成员
- `5`: 群主 + 管理员

### 加入来源（joinSource）

- `2`: 邀请加入
- `3`: 搜索加入
- `4`: 二维码加入

---

## 使用示例

### 完整示例：创建群组并邀请成员

```dart
// 1. 创建群组
final groupInfo = GroupInfo(
  groupID: '', // 创建时会自动生成
  groupName: '技术交流群',
  introduction: '欢迎技术爱好者加入',
  groupType: GroupType.work,
  needVerification: GroupVerification.allNeedVerification,
);

final newGroup = await OpenIM.iMManager.groupManager.createGroup(
  groupInfo: groupInfo,
  memberUserIDs: ['user1', 'user2'],
  adminUserIDs: ['user1'],
);

print('群组创建成功: ${newGroup.groupID}');

// 2. 邀请更多成员
await OpenIM.iMManager.groupManager.inviteUserToGroup(
  groupID: newGroup.groupID!,
  userIDList: ['user3', 'user4'],
  reason: '欢迎加入技术交流群',
);

// 3. 设置群公告
final updateInfo = GroupInfo(
  groupID: newGroup.groupID!,
  notification: '请遵守群规，文明交流',
);

await OpenIM.iMManager.groupManager.setGroupInfo(updateInfo);

// 4. 获取群信息
final groups = await OpenIM.iMManager.groupManager.getGroupsInfo(
  groupIDList: [newGroup.groupID!],
);

// 5. 设置监听器
OpenIM.iMManager.groupManager.setGroupListener(
  OnGroupListener(
    onGroupMemberAdded: (GroupMembersInfo info) {
      print('新成员加入: ${info.nickname}');
    },
    onGroupInfoChanged: (GroupInfo info) {
      print('群信息更新: ${info.groupName}');
    },
  ),
);
```

### 完整示例：处理群组申请

```dart
// 1. 获取收到的申请列表
final req = GetGroupApplicationListAsRecipientReq(
  offset: 0,
  count: 20,
);

final applications = await OpenIM.iMManager.groupManager
    .getGroupApplicationListAsRecipient(req: req);

// 2. 处理每个申请
for (var application in applications) {
  if (application.handleResult == null) {
    // 未处理的申请
    if (shouldAccept(application)) {
      // 接受申请
      await OpenIM.iMManager.groupManager.acceptGroupApplication(
        groupID: application.groupID!,
        userID: application.userID!,
        handleMsg: '欢迎加入',
      );
    } else {
      // 拒绝申请
      await OpenIM.iMManager.groupManager.refuseGroupApplication(
        groupID: application.groupID!,
        userID: application.userID!,
        handleMsg: '暂不符合条件',
      );
    }
  }
}

// 3. 获取未处理申请数量
final countReq = GetGroupApplicationUnhandledCountReq(time: 0);
final unhandledCount = await OpenIM.iMManager.groupManager
    .getGroupApplicationUnhandledCount(countReq);
print('未处理申请数: $unhandledCount');
```

---

## 注意事项

1. **权限要求**：
   - 只有群主可以解散群组、转让群主
   - 群主和管理员可以邀请成员、移除成员、处理申请
   - 所有成员可以退出群组（群主除外，需先转让）

2. **操作ID（operationID）**：
   - 所有接口都支持可选的 `operationID` 参数
   - 如果不提供，SDK 会自动生成一个唯一ID
   - 建议在需要追踪操作时提供自定义ID

3. **已弃用接口**：
   - 部分接口已标记为 `@Deprecated`，建议使用新的统一接口
   - `setGroupVerification` → 使用 `setGroupInfo`
   - `setGroupLookMemberInfo` → 使用 `setGroupInfo`
   - `setGroupApplyMemberFriend` → 使用 `setGroupInfo`
   - `setGroupMemberNickname` → 使用 `setGroupMemberInfo`
   - `setGroupMemberRoleLevel` → 使用 `setGroupMemberInfo`

4. **分页查询**：
   - `offset` 从 0 开始
   - `count` 为 0 时通常表示获取全部数据
   - 建议根据实际需求设置合理的分页大小

5. **搜索功能**：
   - 目前搜索关键词列表仅支持一个关键词
   - 搜索时至少需要指定一种搜索方式（ID 或名称）

6. **监听器**：
   - 设置监听器后需要保持监听器实例不被回收
   - 建议在应用初始化时设置，并在整个应用生命周期中保持

---

## 相关文档

- **[群组字段说明文档](./群组字段说明文档.md)**: 详细的群组字段说明，包括所有新增字段的使用方法和注意事项

## 相关文件位置

- **接口实现**: `lib/src/manager/im_group_manager.dart`
- **监听器**: `lib/src/listener/group_listener.dart`
- **数据模型**: `lib/src/models/group_info.dart`
- **成员信息设置**: `lib/src/models/set_group_member_info.dart`
- **枚举类型**: `lib/src/enum/`

---

*文档最后更新时间：2024年*

